package com.java8.java8Spring;

import java.util.ArrayList;
import java.util.List;

import org.springframework.context.annotation.ComponentScan;
import org.springframework.http.HttpStatus;
import org.springframework.http.ResponseEntity;
import org.springframework.web.bind.annotation.GetMapping;
import org.springframework.web.bind.annotation.RequestBody;
import org.springframework.web.bind.annotation.RequestMapping;
import org.springframework.web.bind.annotation.RequestMethod;
import org.springframework.web.bind.annotation.RestController;
import org.springframework.web.client.RestTemplate;

import RestServices.Cars;
import java8.BaseOutput;
import java8.CollegeDetailsSetter;
import java8.Colleges;

@RestController
public class GenericControls {

	@RequestMapping(value = "java8GET", method = RequestMethod.GET)
	ResponseEntity<BaseOutput> getBasicDtails(Colleges coll) {
		BaseOutput output = new BaseOutput();
		output.setErrorCode((long) 0);
		output.setErrorDesc("Success");
		System.out.println(output.getErrorDesc());

		return new ResponseEntity<BaseOutput>(output, HttpStatus.CREATED);

	}

	@RequestMapping(value = "java8GETHard", method = RequestMethod.GET)
	ResponseEntity<List<Colleges>> getHardBasicDtails() {

		CollegeDAOService coll = new CollegeDAOService();
		List<Colleges> collegeList = new ArrayList<>();

		collegeList = coll.getCollegeDetails();

		return new ResponseEntity<List<Colleges>>(collegeList, HttpStatus.CREATED);

	}

	@RequestMapping(value = "java8POSTHard", method = RequestMethod.POST)
	ResponseEntity<CollegeDAOService> postBasicDetails() {
		CollegeDAOService coll = new CollegeDAOService();
		List<Colleges> collegeList = new ArrayList<>();

		collegeList = coll.setCollegeDetails();

		return new ResponseEntity<CollegeDAOService>(coll, HttpStatus.CREATED);
	}

	@RequestMapping(value = "testingPost", method = RequestMethod.GET)
	public Cars insertCarDetails() {
		Cars car = new Cars();
		car.setCar("Audi");
		car.setPrice(3454356);
		return car;
	}

	@GetMapping("/collegeByCountry/{id}")
	public String getStockItem(RequestBody id) {
		RestTemplate restTemplate = new RestTemplate();
		String URL = "http://universities.hipolabs.com/search?country=" + id;
		ResponseEntity<String> call = restTemplate.getForEntity(URL, String.class);
		return call.getBody().toString();
	}

}
